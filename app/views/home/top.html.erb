<% content_for :title, "ホーム" %>
<div id="error_messages"></div>

<% unless @user.target %>
  <%= render 'home/target_register' %>

<% else %>
  <div class="fixed-top offset-sm-3 col-lg-8 col-sm-9 nav nav-pills nav-fill border-bottom border-left bg-white" id="v-pills-tab" role="tablist" aria-orientation="vertical" style="margin-top: 44px;">
    <a class="nav-item nav-link active" id="v-pills-follow-tab" data-toggle="pill" href="#v-pills-follow" role="tab" aria-controls="v-pills-follow" aria-selected="false">フォロー</a>
    <a class="nav-item nav-link" id="v-pills-target-genre-tab" data-toggle="pill" href="#v-pills-target-genre" role="tab" aria-controls="v-pills-target-genre" aria-selected="false">目標ジャンル</a>
  </div>

  <div class="tab-content mt-4 pt-3" id="v-pills-tabContent">
    <p><%= link_to "投稿する", root_path(modal: "new"), remote: true %></p>
    <div id="micropostModal">
      <%= render 'home/new_micropost_modal' %>
    </div>
    <div class="tab-pane fade active show" id="v-pills-follow" role="tabpanel" aria-labelledby="v-pills-follow-tab">
      <div class="row px-3" id="timeline">
        <% @follower_microposts.each do |micropost| %>
          <%= render 'home/post_card', micropost: micropost %>
        <% end %>
      </div>
      <%= paginate @follower_microposts %>
    </div>
    <div class="tab-pane fade" id="v-pills-target-genre" role="tabpanel" aria-labelledby="v-pills-target-genre-tab">
      <div class="row px-3">
        <p><%= @user.target %></p>
        <% @target_genre_microposts.each do |micropost| %>
          <%= render 'home/post_card', micropost: micropost %>
        <% end %>
        <%= paginate @target_genre_microposts %>
      </div>
    </div>
  </div>

<% end %>

<%= javascript_pack_tag 'home/top' %>