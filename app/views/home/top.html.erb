<% content_for :title, "ホーム" %>
<div id="error_messages"></div>

<% unless @user.target %>
  <%= render 'home/target_register' %>

<% else %>
  <div id="micropostModal">
    <%= render 'home/new_micropost_modal' %>
  </div>

  <div class="fixed-top offset-sm-3 col-lg-7 col-sm-9 nav nav-pills nav-fill border-bottom border-left bg-white" id="v-pills-tab" role="tablist" aria-orientation="vertical" style="margin-top: 44px;">
    <a class="nav-item nav-link active" id="v-pills-follow-tab" data-toggle="pill" href="#v-pills-follow" role="tab" aria-controls="v-pills-follow" aria-selected="false">フォロー</a>
    <a class="nav-item nav-link" id="v-pills-target-genre-tab" data-toggle="pill" href="#v-pills-target-genre" role="tab" aria-controls="v-pills-target-genre" aria-selected="false">目標ジャンル</a>
  </div>

  <div class="tab-content mt-4 pt-3" id="v-pills-tabContent">
    <div class="tab-pane fade active show" id="v-pills-follow" role="tabpanel" aria-labelledby="v-pills-follow-tab">
      <div class="row px-3">
        <%= link_to  root_path(modal: "new"), remote: true, id: "postBtn", class: "col-12 text-center" do %>
          <button class="postBtn w-50 my-2 bg-primary text-white border rounded-pill">投稿する</button>
        <% end %>
        <% @follower_microposts.each do |micropost| %>
          <%= render 'home/post_card', micropost: micropost %>
        <% end %>
      </div>
      <div class="mt-2">
        <%= paginate @follower_microposts %>
      </div>
    </div>
    <div class="tab-pane fade" id="v-pills-target-genre" role="tabpanel" aria-labelledby="v-pills-target-genre-tab">
      <div class="row px-3">
        <h5><div class="badge badge-pill badge-primary"><%= @user.target %></div></h5>
        <% @target_genre_microposts.each do |micropost| %>
          <%= render 'home/post_card', micropost: micropost %>
        <% end %>
      </div>
      <div class="mt-2">
        <%= paginate @target_genre_microposts %>
      </div>
    </div>
  </div>
<% end %>

<%= javascript_pack_tag 'home/top' %>