$(function() {
  $('#newMicropostModal').modal('hide');

  $('#newMicropostModal').on('hidden.bs.modal', function () {
    $("#error_messages_in_top_page").html("<%= escape_javascript(render 'shared/error_messages', object: @micropost) %>");

    <% if @micropost.errors.any? %>
      $('body, html').animate({ scrollTop: 0 }, 400);
    <% else %>
      $("#followersPosts").prepend("<%= escape_javascript(render 'home/post_card', micropost: @micropost) %>");
      $("#micropostModal").html("<%= escape_javascript(render 'home/new_micropost_modal') %>");
    <% end %>
  })
})

